<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.01877a06b072953c14c7.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.24.49"/><title data-react-helmet="true">The N props syndrome</title><meta data-react-helmet="true" name="description" content="If you have already worked on a codebase having components with a lot of , you might have been victim of what I call &quot;The N props syndromeâ€¦"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#a2466c"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link as="script" rel="preload" href="/webpack-runtime-9e75599288b6f2e07645.js"/><link as="script" rel="preload" href="/framework-63ec46a3540d83159f28.js"/><link as="script" rel="preload" href="/styles-f7a64dad1c13bebc31fd.js"/><link as="script" rel="preload" href="/app-4f894753e1bd94094e8a.js"/><link as="script" rel="preload" href="/6eb610abcce4d0fad5f5f9aaf8ec8b37041f2811-a207fba5b0a90945fb4f.js"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-136e6f6b2b6ec1d11ca2.js"/><link as="fetch" rel="preload" href="/page-data/the-n-props-syndrome/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1m7fbdi">html,body{margin:0;padding:0;}body{font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;background:hsl(231,48%,98%);}@media (min-width:1000px){body{font-size:24px;}}p{line-height:1.7;margin:0;padding:0;margin-bottom:32px;color:hsl(231,48%,22%);font-weight:400;}a{color:unset;font-weight:hsl(231,48%,22%);}a:active{opacity:0.5;}ul{margin:0;padding:0;list-style:none;margin-bottom:32px;margin-left:12px;}@media (min-width:1000px){ul{margin-left:32px;}}.gatsby-highlight{margin-bottom:32px;font-size:12px;}li{margin:0;padding:0;margin-bottom:12px;line-height:1.7;color:hsl(231,48%,22%);font-weight:400;}li:before{content:"";display:inline-block;height:18px;width:18px;background-image:url(data:image/svg+xml;base64,PHN2ZyBzdHJva2U9ImN1cnJlbnRDb2xvciIgZmlsbD0iIzNmNTFiNSIgc3Ryb2tlLXdpZHRoPSIwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGhlaWdodD0iMWVtIiB3aWR0aD0iMWVtIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0tMiAxNWwtNS01IDEuNDEtMS40MUwxMCAxNC4xN2w3LjU5LTcuNTlMMTkgOGwtOSA5eiI+PC9wYXRoPjwvc3ZnPg==);background-size:contain;background-repeat:no-repeat;margin-right:8px;vertical-align:middle;}li:last-of-type{margin-bottom:0;}@media (min-width:1000px){li:before{content:"";display:inline-block;height:24px;width:24px;background-image:url(data:image/svg+xml;base64,PHN2ZyBzdHJva2U9ImN1cnJlbnRDb2xvciIgZmlsbD0iIzNmNTFiNSIgc3Ryb2tlLXdpZHRoPSIwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGhlaWdodD0iMWVtIiB3aWR0aD0iMWVtIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0tMiAxNWwtNS01IDEuNDEtMS40MUwxMCAxNC4xN2w3LjU5LTcuNTlMMTkgOGwtOSA5eiI+PC9wYXRoPjwvc3ZnPg==);background-size:contain;background-repeat:no-repeat;margin-right:8px;vertical-align:middle;}}h1,h2,h3,h4,h5,h6{margin:0;padding:0;font-weight:600;}h1{color:hsl(231,48%,48%);margin-bottom:12px;font-size:24px;}h2{margin-bottom:24px;font-size:24px;}h3{margin-bottom:16px;font-size:18px;}@media (min-width:1000px){h1{font-size:48px;}h2{font-size:36px;}h3{font-size:24px;}}code.language-text{font-size:12px;padding:4px 8px!important;vertical-align:middle !important;background:hsl(231,48%,90%)!important;color:hsl(231,48%,22%);}@media (min-width:1000px){code.language-text{font-size:14px;}}time{display:block;font-size:14px;margin-bottom:32px;}</style><style data-emotion-css="6w1a7a">.css-6w1a7a{position:absolute;height:1px;width:1px;overflow:hidden;-webkit-clip:rect(1px,1px,1px,1px);clip:rect(1px,1px,1px,1px);white-space:nowrap;}</style><a href="#mfrachet-content" class="css-6w1a7a">Jump to content</a><style data-emotion-css="1lxsp7q">.css-1lxsp7q{-webkit-transition:all .2s;transition:all .2s;z-index:9999;position:fixed;top:0;left:0;width:100%;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);height:4px;background:hsl(231,48%,48%);}</style><div aria-hidden="true" class="css-1lxsp7q"></div><style data-emotion-css="9ncsls">.css-9ncsls{margin-top:24px;margin-left:24px;margin-right:24px;}@media (min-width:1000px){.css-9ncsls{margin-top:96px;width:720px;margin-left:96px;}}</style><div class="css-9ncsls"><nav><style data-emotion-css="8qb8m4">.css-8qb8m4{margin-bottom:48px;}</style><div aria-label="Last visited page" role="navigation" class="css-8qb8m4"><style data-emotion-css="t3y5ls">.css-t3y5ls{list-style-type:none;margin:0;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media (min-width:1000px){.css-t3y5ls{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><ol class="css-t3y5ls"><style data-emotion-css="1pw74by">.css-1pw74by{margin-bottom:0;}.css-1pw74by:before{content:"";background:hsl(231,48%,90%);border:1px solid hsl(231,48%,48%);border-radius:50%;}.css-1pw74by [aria-current="page"]{color:hsl(231,48%,22%);-webkit-text-decoration:none;text-decoration:none;}.css-1pw74by:last-of-type:before{content:"";background:hsl(231,48%,48%);border-radius:50%;}@media (min-width:1000px){.css-1pw74by:before{content:none;}.css-1pw74by:last-of-type:before{content:none;}}</style><li class="css-1pw74by"><a href="/">Home</a></li><style data-emotion-css="9ek1xx">.css-9ek1xx{margin-bottom:12px;}.css-9ek1xx:before{content:none;}.css-9ek1xx span{display:none;}@media (min-width:1000px){.css-9ek1xx span{display:block;width:24px;text-align:center;}}</style><li role="separator" aria-hidden="true" class="css-9ek1xx"><span>/</span></li><li class="css-1pw74by"><a href="/posts">Blog posts</a></li><li role="separator" aria-hidden="true" class="css-9ek1xx"><span>/</span></li><style data-emotion-css="2fb6ce">.css-2fb6ce{margin-bottom:0;}.css-2fb6ce:before{content:"";background:hsl(231,48%,90%);border:1px solid hsl(231,48%,48%);border-radius:50%;}.css-2fb6ce [aria-current="page"]{color:hsl(231,48%,48%);-webkit-text-decoration:none;text-decoration:none;}.css-2fb6ce:last-of-type:before{content:"";background:hsl(231,48%,48%);border-radius:50%;}@media (min-width:1000px){.css-2fb6ce:before{content:none;}.css-2fb6ce:last-of-type:before{content:none;}}</style><li class="css-2fb6ce"><a aria-current="page" class="" href="/the-n-props-syndrome">The N props syndrome</a></li></ol></div></nav><div id="mfrachet-content"></div><main><h1>The N props syndrome</h1><time dateTime="September 08, 2020">September 08, 2020</time><div class="blog-post-content"><p>If you have already worked on a codebase having components with a lot of <code class="language-text">props</code>, you might have been victim of what I call <strong>"The N props syndrome"</strong>.</p>
<p>Let me explain what I mean by telling you the story of my main Open Source project.</p>
<p>Some years ago, I've released the first version of <a href="https://github.com/mfrachet/rn-placeholder">rn-placeholder</a> that is a <a href="https://reactnative.dev/">react-native</a> library aiming to provide UX friendly skeleton loaders as you may see in the Facebook mobile or Slack desktop applications:</p>
<p><img src="/d8584db57cd04e7ebc670399329060b2/rn-placeholder.gif" alt="rn-placeholder example"></p>
<p>At that time, if you wanted to use the library, you had to include the following to your codebase:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// The v1.0.0 README is available here: https://github.com/mfrachet/rn-placeholder/tree/v1.0.0</span>
<span class="token comment">// There were some others components like Placeholder.Paragraph for example</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Placeholder.ImageContent</span></span>
  <span class="token attr-name">size</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">60</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">animate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade<span class="token punctuation">"</span></span>
  <span class="token attr-name">lineNumber</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">lineSpacing</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">firstLineWidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>80%<span class="token punctuation">"</span></span>
  <span class="token attr-name">lastLineWidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span>
  <span class="token attr-name">onReady</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isReady<span class="token punctuation">}</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>both<span class="token punctuation">"</span></span>
<span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">Loading has finished :D</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Placeholder.ImageContent</span></span><span class="token punctuation">></span></span></code></pre></div>
<h2>Why I do think this is not a good API?</h2>
<h3>From a consumer perspective</h3>
<p>As a developer, I'm using other people tools because they solve problem that I don't want to deal with directly.</p>
<p>I know that if a library trying to solve my problems is not easy nor practical, I won't use it and I will take something else that better fits my needs. This is the same as the <em>User Experience</em> when dealing with a product - if the experience is not good enough, people will use another product.</p>
<p>A component with a lot of <code class="language-text">props</code> scares me because it doesn't look easy to use: it seems to do a lot of things with a lot of different settings. I often see very interesting "business" oriented components (they solve complex and isolated problems) but they tend to lack UI customizations. <strong>The platform I'm using aims to provide a visual representation of the business</strong>. Since every product is different, I need to be able to customize the underlying <strong>style of elements</strong> according to my context.</p>
<p>For instance, I don't like this kind of component:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Firstname<span class="token punctuation">"</span></span>
  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>firstName<span class="token punctuation">}</span></span>
  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">labelStyle</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">"gray"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/></span></span></code></pre></div>
<p>because they prevent me from having control over the underlying <code class="language-text">input</code> and <code class="language-text">label</code> elements.</p>
<p>What if I have specific accessibility needs for the <code class="language-text">input</code>? Or even for the <code class="language-text">label</code>? I don't have control over them and <strong>this is blocking to me</strong>.</p>
<p>Also notice the <code class="language-text">labelStyle</code> prop exposed: this is an interesting way of solving <em>some</em> of the problems but <strong>it prevents me</strong> from using other tools like <a href="https://styled-components.com/">styled-components</a>.</p>
<p>Getting back to the rn-placeholder story, let's take some time to analyze the API:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Placeholder.ImageContent</span></span>
  <span class="token attr-name">size</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">60</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">animate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade<span class="token punctuation">"</span></span>
  <span class="token attr-name">lineNumber</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">lineSpacing</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">firstLineWidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>80%<span class="token punctuation">"</span></span>
  <span class="token attr-name">lastLineWidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span>
  <span class="token attr-name">onReady</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isReady<span class="token punctuation">}</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>both<span class="token punctuation">"</span></span>
<span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">Loading has finished :D</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Placeholder.ImageContent</span></span><span class="token punctuation">></span></span></code></pre></div>
<p>As a consumer, I have some questions:</p>
<ul>
<li>What does the <code class="language-text">size</code> refer to? The square? The line? The whole thing?</li>
<li><code class="language-text">lineNumber</code> is <code class="language-text">4</code> and the component exposes <code class="language-text">lastLineWidth</code> and <code class="language-text">firstLineWidth</code>. How can I modify the third line width or color?</li>
<li><code class="language-text">animate</code> is hardcoded, can I customize it?</li>
<li>Does <code class="language-text">position</code> refer to the squares, or maybe the lines?</li>
</ul>
<p>These are interesting questions. Some are simple enough to get answered in a github issue, but some other needs attention and potential modifications of the codebase and so, new releases.</p>
<h3>From a maintainer perspective</h3>
<p>From a maintainer perspective, having many <code class="language-text">props</code> on the same component means that the component implementation itself has to deal with all of that <code class="language-text">props</code>.</p>
<p>Let's step back from the React ecosystem and think about more "conventional programming".</p>
<p>Functions with a lot of <code class="language-text">arguments</code> often tend to have a lot of computational logic which makes them hard to read and to reason about. It's also a signal that, maybe, the function is doing too much and could be split up in smaller - more maintainable - chunks. This is about the <a href="https://en.wikipedia.org/wiki/Single-responsibility_principle">Single Responsibility Principle</a>: do one thing and do it well.</p>
<p>Looking at the previous statement, component <code class="language-text">props</code> are like function <code class="language-text">arguments</code>. The more you have, the more the implementation may become complex. And if the implementation gets more complex, then there are more places for bugs, implying more time trying to fix them and less time to focus on important things: solving real and interesting problems.</p>
<h2>What I could have done?</h2>
<p>There are many roads to improve, but I will go through the one I've chosen to make the experience better. Remember that it's not a perfect solution but the one I chose.</p>
<p>I'm going to start by answering the consumer questions listed above and try to find ways to improve the API accordingly.</p>
<h3>What does the <code class="language-text">size</code> refer to? The square? The line? The whole thing?</h3>
<p>The API is not clear and the consumer doesn't know which element is affected by the <code class="language-text">size</code> prop.</p>
<p>Also, this made me realize that a line and a media can have different sizes in the same placeholder and this is actually not possible to differentiate them.</p>
<p>We can imagine solving this issue by adding a <code class="language-text">lineSize</code> and a <code class="language-text">mediaSize</code> props but this will lead us to add another piece of complexity to the existing API that is already bloated enough.</p>
<p>Let's try to approach things differently:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> PlaceholderLine<span class="token punctuation">,</span> PlaceholderMedia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"rn-placeholder"</span><span class="token punctuation">;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderMedia</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50%<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>32px<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>32px<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span></code></pre></div>
<p>With these modifications, we become explicit about sizes and their subjects. As a side effect, we are now able to customize both the line and the media independently: notice the <code class="language-text">height</code> prop added to the <code class="language-text">PlaceholderMedia</code> component but not to the <code class="language-text">PlaceholderLine</code>.</p>
<h3>Prop <code class="language-text">lineNumber</code> is <code class="language-text">4</code> and the component exposes <code class="language-text">lastLineWidth</code> and <code class="language-text">firstLineWidth</code>. How can I modify the third line width or color?</h3>
<p>The thing is that the <code class="language-text">&lt;Placeholder.ImageContent /&gt;</code> component owns a <code class="language-text">lineNumber</code> prop but we have no way to style a line in particular.</p>
<p>A solution to that problem would be to leverage the new API we have defined and add an additional <code class="language-text">color</code> prop to the <code class="language-text">PlaceholderLine</code> and <code class="language-text">PlaceholderMedia</code> components:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> PlaceholderLine <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"rn-placeholder"</span><span class="token punctuation">;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>90%<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderMedia</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50%<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>32px<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>32px<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>green<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span></code></pre></div>
<p>Using this new approach, we have total control over any of the lines of the placeholder.</p>
<h3>Prop <code class="language-text">animate</code> is hardcoded, can I customize it?</h3>
<p>The problem the consumer is facing is that with <code class="language-text">&lt;Placeholder.ImageContent /&gt;</code>, animations had to be part of the library's codebase - <strong>this is a maintainer problem</strong>.</p>
<p>If the consumer wants to add a new animation, they have to:</p>
<ul>
<li>clone the project</li>
<li>create a new animation</li>
<li>open a pull request</li>
<li>wait for maintainers validations</li>
<li>wait for a new version to get released</li>
<li>use the new animation</li>
</ul>
<p>This is cumbersome.</p>
<p>Instead, we could imagine a prop in which we would <em>inject</em> a custom animation <strong>from user-lands</strong> that will run seem-less-ly as part of the placeholder.</p>
<p>And this is a very interesting idea because we're shifting the responsibility of creating animations <strong>outside the library's codebase</strong> meaning less problems for maintainers and higher customization potential for the consumer:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> Placeholder<span class="token punctuation">,</span> PlaceholderLine<span class="token punctuation">,</span> PlaceholderMedia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"rn-placeholder"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MyCustomAnimation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./user-lands/MyCustomAnimaton"</span><span class="token punctuation">;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Placeholder</span></span> <span class="token attr-name">Animation</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>MyCustomAnimation<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>90%<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderMedia</span></span> <span class="token attr-name">radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50%<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>32px<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>32px<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Placeholder</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span></code></pre></div>
<h3>Does <code class="language-text">position</code> refer to the squares, or maybe the lines?</h3>
<p>Historically, I added the prop to create harmony in terms of spacing between the elements on each sides of the "main" content to improve <a href="https://www.interaction-design.org/literature/article/repetition-pattern-and-rhythm">the user experience in terms of rhythm</a>.</p>
<p>Beside being confusing about its subject, the prop prevents us from having control over what kind of component we want to display on each side. What if I don't want to display <code class="language-text">PlaceholderMedia</code> but <code class="language-text">PlaceholderLine</code> on the right?</p>
<p>Let's iterate a last time on the API:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> Placeholder<span class="token punctuation">,</span> PlaceholderLine<span class="token punctuation">,</span> PlaceholderMedia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"rn-placeholder"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MyCustomAnimation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./user-lands/MyCustomAnimaton"</span><span class="token punctuation">;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Placeholder</span></span>
  <span class="token attr-name">Animation</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>MyCustomAnimation<span class="token punctuation">}</span></span>
  <span class="token attr-name">Left</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderMedia</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span>
  <span class="token attr-name">Right</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderMedia</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span>
<span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>90%<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Placeholder</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span></code></pre></div>
<h2>Summing up</h2>
<p>After iterating thanks to the consumer's feedbacks, this is the API we end up with:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> Placeholder<span class="token punctuation">,</span> PlaceholderLine<span class="token punctuation">,</span> PlaceholderMedia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"rn-placeholder"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MyCustomAnimation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./user-lands/MyCustomAnimaton"</span><span class="token punctuation">;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Placeholder</span></span>
  <span class="token attr-name">Animation</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>MyCustomAnimation<span class="token punctuation">}</span></span>
  <span class="token attr-name">Left</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderMedia</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span>
  <span class="token attr-name">Right</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderMedia</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span>
<span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>90%<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlaceholderLine</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Placeholder</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span></code></pre></div>
<p>Thanks to the refactoring, we split the <code class="language-text">Placeholder.ImageContent</code> that had a lot of props and we:</p>
<ul>
<li>made a <code class="language-text">PlaceholderLine</code> component with its own dedicated props</li>
<li>made a <code class="language-text">PlaceholderMedia</code> component with its own dedicated props</li>
<li>made a <code class="language-text">Placeholder</code> component representing the whole concept</li>
<li>tweaked the <code class="language-text">animate</code> prop to make it more powerful</li>
</ul>
<p>Let's step back and talk about more "conventional programming" again and the situation of the library's codebase after the modifications.</p>
<p>What we did is reducing the amount of logic and complexity of a single and big component (<code class="language-text">Placeholder.imageContent</code>) into smaller chunks. Instead of having a big file with a lot of <strong>very specific</strong> computational logic, we extracted code in other files, creating smaller units (<code class="language-text">PlaceholderLine</code> and <code class="language-text">PlaceholderMedia</code>) and <strong>composed</strong> them to create a complex placeholder.</p>
<p>Apart from answering the consumer's questions, we also have opened doors for the creation of new components like <code class="language-text">PlaceholderTriangle</code> or anything else, both in the library <strong>but also in user-lands</strong>. The consumer is not forced to open a pull request nor to wait for a specific release to be able to use a new animation or a new component anymore - they can use their own <strong>specific ones as part of their codebase</strong>.</p>
<p>We can now say that the library is <strong>closed for modifications</strong> and <strong>open for extensions</strong>: we don't need to <em>modify</em> the core codebase nor to create new releases to <em>improve</em> the experience. The consumer is able to do it in user-lands while still benefiting from what the library exposes. This is about the <a href="https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle">Open-Closed Principle</a>.</p>
<h2>Last note</h2>
<p>While I'm a strong believer on the smaller a component is, the easier it is to manage, <strong>don't forget that writing code is always a matter of tradeoffs</strong>. It's up to you and your team to take decisions on what is the best for you depending on your context.</p>
<p>Everything here are my personal thoughts and this post is not about providing a source of truth. It's about challenging the APIs that we write as often as we can. My main intent being to make people wondering <strong>why they add another prop to a component</strong> and to create connections to new ideas.</p>
<p>If you've just started working on a new project, I won't advice to deeply think about making "incredibly scalable components". Maybe focusing on having a representation of the business is what is important <em>right now</em>. If you see and feel patterns emerging, then it could be time to re-think and adjust your codebase - but I would suggest to take time, getting confidence about the business and then adjust.</p>
<hr>
<p>This is a rewrite of my post <a href="https://dev.to/mfrachet/a-note-on-composing-components-with-react-5ee4">"A note on composing components" available on dev.to</a> that is obsolete and not complete.</p></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-178009040-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.defer=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-178009040-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/the-n-props-syndrome";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c5e92edf106160da4937.js"],"app":["/app-4f894753e1bd94094e8a.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-7c31e2436cade51cbcda.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-07542f7b6e5b03913409.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-55567d10fccb86c9b67d.js"],"component---src-pages-posts-tsx":["/component---src-pages-posts-tsx-14f67ed62653319a774d.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-136e6f6b2b6ec1d11ca2.js"]};/*]]>*/</script><script src="/polyfill-c5e92edf106160da4937.js" nomodule=""></script><script src="/component---src-templates-blog-template-js-136e6f6b2b6ec1d11ca2.js" async=""></script><script src="/6eb610abcce4d0fad5f5f9aaf8ec8b37041f2811-a207fba5b0a90945fb4f.js" async=""></script><script src="/app-4f894753e1bd94094e8a.js" async=""></script><script src="/styles-f7a64dad1c13bebc31fd.js" async=""></script><script src="/framework-63ec46a3540d83159f28.js" async=""></script><script src="/webpack-runtime-9e75599288b6f2e07645.js" async=""></script></body></html>