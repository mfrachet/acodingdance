{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/how-do-i-choose-a-ssr-strategy__draft","result":{"data":{"post":{"__typename":"MdxPost","slug":"/how-do-i-choose-a-ssr-strategy__draft","title":"How do I choose which SSR strategy to adopt?","date":"23.05.2020","tags":null,"description":null,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How do I choose which SSR strategy to adopt?\",\n  \"date\": \"2020-05-23T00:00:00.000Z\",\n  \"slug\": \"/how-do-i-choose-a-ssr-strategy__draft\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Server Side Rendering (or SSR) is a big trend. In the React ecosystem, we have plenty of tools that rely on it such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/\"\n  }), \"Gatsbyjs\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://nextjs.org/\"\n  }), \"Nextjs\"), \".\"), mdx(\"p\", null, \"Before getting further, let's see what happens when a user makes a request on a site that is not built using SSR:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The browser makes a request on a specific endpoint\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It downloads an empty HTML file that only owns a bunch of \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"<script>\"), \" tags to load some JavaScript code\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It resolves / parses / compiles the JavaScript code\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It executes the JavaScript code and only then the application can display the content\")), mdx(\"p\", null, \"This is how the good old \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://angularjs.org/\"\n  }), \"Angularjs\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://jquery.com/\"\n  }), \"JQuery\"), \" applications were working. And this is also what happens when we use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/facebook/create-react-app\"\n  }), \"create-react-app\"), \".\\nWe say that these applications rely on \\\"Client Side Rendering\\\" (or CSR).\"), mdx(\"h4\", null, \"Why SSR has been invented?\"), mdx(\"p\", null, \"When building an application using CSR, we \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"always\"), \" have to wait for the JavaScript code to be resolved / parsed / compiled / executed \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"before\"), \" displaying anything on the screen.\\nThe JavaScript application is responsible for filling the HTML file dynamically in the browser.\\nAnd this can be problematic because:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"CSR applications are not optimized for SEO (\", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://developers.google.com/web/updates/2019/02/rendering-on-the-web#seo\"\n  }), \"SEO works, but it's a bit more complicated\"), \")\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We don't benefit from a good media sharing experience\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Displaying the first meaningful content or wait for the application to be interactive can take time\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"I remember having worked on an Angularjs application in 2013 where it took around 10 seconds to display the first content on the page.\")), mdx(\"h4\", null, \"How does it solve these problems?\"), mdx(\"p\", null, \"The main idea behind SSR is to generate HTML content and display it to the user the sooner. HTML is easy to understand for browsers, they know how to execute it really fast.\"), mdx(\"p\", null, \"This way, when a user navigates:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The browser makes a request on a specific endpoint\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It downloads \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"an already filled HTML content\"), \" and can already display it to the user\")), mdx(\"p\", null, \"Which is enough to solve the 3 problems we had:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-git\"\n  }), \"- CSR applications are not optimized for SEO\\n+ HTML is optimized for SEO\\n\\n- We don't benefit from a good media sharing experience\\n+ Pre-filled HTML owns the necessary meta to have a good sharing experience\\n\\n- Displaying the first meaningful content or wait for the application to be interactive can take time\\n+ Displaying HTML content is probably one of the fastest thing a browser can do\\n\")), mdx(\"p\", null, \"This is the most basic idea behind the term SSR and with this in mind, we can create complex and powerful mechanisms:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Runtime SSR\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Start a nodejs server\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When a request is made, render static HTML content (string format)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Start a client side application in the browser for interactivity\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Used by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://nextjs.org/\"\n  }), \"Nextjs\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"First way of SSR we've seen in the React ecosystem\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Static Generation\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"At build time (when running \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"npm run build\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"yarn build\"), \")\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Generate as many \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"HTML files (.html)\"), \" as necessary\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When a request is made, render the associated .html file\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Used by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://docusaurus.io/\"\n  }), \"Docusaurus\"))), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Build time SSR / Pre-rendering\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"At build time (when running \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"npm run build\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"yarn build\"), \")\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Generate as many \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"HTML files (.html)\"), \" as necessary\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When a request is made, render the associated .html file\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Start a lightweight client side application in the browser for interactivity\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Used by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/\"\n  }), \"Gatsby\"))), mdx(\"p\", null, \"And this is where it gets tricky.\"), mdx(\"h4\", null, \"How to choose?\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Choosing a strategy is not about finding the best solution\"), \". It's about evaluating trade offs and taking the\\ntechnic that provides \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"the most benefit in our context\"), \" than it provides drawbacks.\"), mdx(\"p\", null, \"Also, I'm feeling that the last few years we tend to use SSR almost everywhere and as much as we can.\\nWhile it's an amazing tool that helps in many situations, I think\\nwe should keep in mind that \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"it's just a tool\"), \" - not a silver bullet solution. If we don't face the problems it's supposed to solve, I'm not convinced we should introduce it in a project.\\n\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Remember that introducing SSR is not free\"), \", it has a technical cost and a potential infrastructure cost.\"), mdx(\"p\", null, \"The following diagram is one of the mental representations I'm using to determine when I would consider using a technic over another one. It's not a source of truth at all. \"), mdx(\"p\", null, \"Finally we don't have to choose a single way of building an app: we can cross the ideas and create a system that provides the best user experience in our scenario.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"64.99999999999999%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyklEQVQ4y62T2wqDMBBEc/VWta2VVvrc///GbuAEliDa2gYOQYmzs7PRmO3VCKP50wpCJdSCF+xRIY9IVCIet+GI4CRcBIdQUIKjchxg17njYFMcTiI3YRFmoReGb12nDE+0byjgfskzT9od+dDiJCLgigEF3qXn7hOXnkxGXFUw0HZA+Ar11lRT0A/hrNxo53nvKZyjaNacJqEX+4CrtYvc4j4Uf5Fda9UX984q9xPOOgpGVeBOdwsxtHu5RhwHlWGeeCrwhBm3/RsOhQRHns2x8QAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Mental SSR path to make a choice\",\n    \"title\": \"Mental SSR path to make a choice\",\n    \"src\": \"/static/4cc3cccc62e33b156a94aa02905f48fe/7d769/ssr.png\",\n    \"srcSet\": [\"/static/4cc3cccc62e33b156a94aa02905f48fe/5243c/ssr.png 240w\", \"/static/4cc3cccc62e33b156a94aa02905f48fe/ab158/ssr.png 480w\", \"/static/4cc3cccc62e33b156a94aa02905f48fe/7d769/ssr.png 960w\", \"/static/4cc3cccc62e33b156a94aa02905f48fe/87339/ssr.png 1440w\", \"/static/4cc3cccc62e33b156a94aa02905f48fe/88b03/ssr.png 1920w\", \"/static/4cc3cccc62e33b156a94aa02905f48fe/5bee1/ssr.png 4121w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Server Side Rendering (or SSR) is a big trend. In the React ecosystem, we have plenty of tools that rely on it such as  Gatsbyjs  or  Nextjs…","timeToRead":2,"banner":null}},"pageContext":{"slug":"/how-do-i-choose-a-ssr-strategy__draft","formatString":"DD.MM.YYYY"}}}