{"componentChunkName":"component---src-templates-blog-template-js","path":"/a-b-testing-on-the-jamstack","result":{"data":{"markdownRemark":{"html":"<p>The JAMstack has been talked about in recent years like a way to create static websites that scales very well in many different ways.\nSince it becomes more and more mainstream, it made sense to people to think about how to apply older patterns that we like in this\nquite particular context.</p>\n<p>In this post, I will share with you <strong>my vision</strong> of A/B testing with the JAMstack.</p>\n<h2>But first, why do we use the JAMstack?</h2>\n<p>According to <a href=\"https://jamstack.org/\">jamstack.org</a>, we use it because:</p>\n<ul>\n<li>it's about building <strong>simple static pages</strong> (HTML files)</li>\n<li>most of the job is made at build-time, no potential leak at runtime, it's more <strong>secured</strong></li>\n<li>static pages are basically HTML and thus <strong>load very fast</strong></li>\n<li>we benefit from <strong>chip hosting</strong> (putting HTML files on a server and there we go)</li>\n<li>it's <strong>highly scalable</strong>, just put the files on another machine and scaling is done</li>\n<li>it already exists great tools to create amazing applications (<a href=\"https://www.gatsbyjs.com/\">Gatsbyjs</a>, <a href=\"https://nextjs.org/\">Nextjs</a>, <a href=\"https://www.11ty.dev/\">11ty</a>, <a href=\"https://jamstack.org/generators/\">etc...</a>)</li>\n</ul>\n<h2>Why do we use A/B testing?</h2>\n<p>People use A/B testing to measure which variant of a website is more appreciated by their users. The idea is simply to provide different visual representations\nof some data and check which one attracts more people.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 507px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d14d0d3eef1c8849bccf93f62cfcbda9/3ebb1/ab-tests.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAE3UlEQVQ4y3WUe2xTVRzH7+3duva2vWtvb9ut7cq6tetjbe+6dttd77P3dt26ra+x2TFeEglmg4zxkhVcdAyCwSwQiIo8Y1TYX4o8okaMaDCbURKfQWKIBmNUJAw0MRES57mlJv7jTb45Nzm/8znfc37n94Og8qdTWVWIospRoVBZKhC1pRLR4ND/fJUIagRxZjDiYI1Vp7ZV/XfeAIQCVQMtA7IBmYFkoFLeC1Eoq4AQ8G8E0pbjPED15X85VlOeh0ysd7c71XIklImcCPSFX/SB0Z+OHA+IgX0RT23GCWLUQIi5OugQ/NPubvKgp7/1ZVeq5XAjWNfUQx7ygNgGGEZskAKuwNeLn3QWc/el7f2/sjvSv3FPZe7Ed2YXuS29t5JgM7LsFPbbh5p3Zu+xYJ4HcTQYuR3p20Ix9zsHGIxaabTLDvHV3LvC1OADZmd+MTaZv89NAtiu3H0Q/HOC9035QYxKDgRAcjJ7VyhmF1kwcsXsXXEyc4cBsezG5Fcy0AHBCtjAu54NDpMXm3P+10OZwCky3zEXynReCPR3vBlorl9vL98PvMwkuLPUucgQ8z65gp8nh5groXzsbTLXeak1FXk1DJIp3yeEmtaYrM6iJ+Sa8ftMT1o9TjVk2OcMmKYami0JvFZOmg4wFVoYwrY6EONYXRUxaleYNtchpnGH0vyEFbFsssM4yJq1BAxMswH20mCy59PHY95Tidjwsmj020RRvMqP9+zyJMLlVwBROFH7Hscnf+zrF653p+Lf9fSKN7pT0s1Ur/SREBcJpbKxBAzuZ330+bzQtbCqw3tapFbWRYN/9s9Gb3Y9Q894+/yPjqyFGKPR/KUkxR/kcvQf6Qy9mMkI9zJZ5mF+eefnUlcMq6goATXkrOBhLuZ5aWEkFnklRTnNesdIozWwzmdvbTNX15ffngJXqwwD7gb3sMfVNOBp9G5wuZwFR42/UG+OrHXV+JQKuK4EDM3yTczFgXhiYYQKvdbXMUhWOX6YwNh7xWpmRlTJzwbdDZICOWvMyMxaWjm3q1O5d60E0e2atwYrvX9P49QXoxht1sDuR8ADnBc4FBLzI7Hgmf62QlDl/GUbzjycIvg9Alq6w9XAIWIjLIaT21jzwuGY8eRWCUqJ+g8KaGhpxsxeHzOwDkzRIAO1AOgDQDExv4Ihz6bbcy1o/U9bDMxfTxvF/RLaIlfKKAAqrEYrdnhMNH58sEN/bLME9caxD1eoA0t7TPSNTQamDlPU/Qv0MpcGugCQJufS7XlS7QRAHjgUnu9C5SOrszLQTtixIxt54/whSn9sIgGJDHa5gJIAyFzfqO/0EUipUrTkwbiXvpBPSFeHqdDZdPSxMOq8NWEQHkwZ47NJTVAGUqCWYQKzAYc8cEjrj45LUJypPpdXh2Xg16N6zksgthKw9aWEl7s8JCSvraJa3si1F1rRxtvbcHFpmuCPpDQhGQhsVgCHVuzoeBdx7YV2w/EJGWg4P6BqXdpv5r4Z0/PgyCWHmqbt0YbgcyzTdiIZbToghJeH0dora7D2zzboqSlOLWdODfqTCnHbCN2+dbT+TLFNVyxIEENpT6dUvu8n8Ng7KzHKooFLQKLc/+SyqZHbWblHEuU+Z4AfNQe5WiywVoXDuI6A0apauf8hMGTRKWErWglZ5PX/AI4jPyjy8OLlAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Visual representation of two different variants of an A/B tests\"\n        title=\"Visual representation of two different variants of an A/B tests\"\n        src=\"/static/d14d0d3eef1c8849bccf93f62cfcbda9/3ebb1/ab-tests.png\"\n        srcset=\"/static/d14d0d3eef1c8849bccf93f62cfcbda9/e9ff0/ab-tests.png 180w,\n/static/d14d0d3eef1c8849bccf93f62cfcbda9/f21e7/ab-tests.png 360w,\n/static/d14d0d3eef1c8849bccf93f62cfcbda9/3ebb1/ab-tests.png 507w\"\n        sizes=\"(max-width: 507px) 100vw, 507px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>If the visitors of the variant A come more often than the visitors of the variant B, then we can assume that variant A is a more viable solution to represent the data on the page.</p>\n<h2>How do we use A/B testing in none JAMstack applications?</h2>\n<p>In applications that are not built using the JAMstack, the idea is quite straightforward.</p>\n<p>When opening the application in the browser, it will make a request to a remote server to get the different available variations. Then, based on some conditions in the codebase, we are able to display the good variation to the user.</p>\n<p>Here's a code snippet of a tiny experiment written with React:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> variant<span class=\"token punctuation\">,</span> isLoading <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useABVariant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLoading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Preparing the application...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>variant <span class=\"token operator\">===</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Here's the A variant!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Here's the B variant!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As you see in the snippet, the code is executed in the user's browser. They may notice a loading information while the request is pending before being able to use the application.</p>\n<h2>Why A/B testing on the JAMstack is different?</h2>\n<p>Remember one of the main arguments of building on top of the JAMstack is performances.</p>\n<p>While it's technically possible to use the \"standard way\" to rely on A/B tests (e.g making runtime requests), it will make performances worse and increase the first time to meaningful content on the page <strong>because of the loading information on the screen</strong>.</p>\n<ul>\n<li>\n<p>Usual tools make A/B testing at runtime, on HTTP requests or websocket pushes</p>\n<ul>\n<li>feature activation is done \"live\", in \"realtime\", when a user is browsing a site</li>\n<li>we lose the JAMstack strength about page loading since the UI needs an extra HTTP roundtrip to get the information of which variant to show</li>\n<li>performance scores can drop by some points (we've seen drops about 20 points in Lighthouse in some cases)</li>\n</ul>\n</li>\n<li>\n<p>How can we do A/B testing to be aligned with the JAMStack concepts?</p>\n<ul>\n<li>Before going further</li>\n<li>Remember that when requesting a static page, we don't have access to runtime information, like the user currently connected, so voluntary targeted A/B testing can't be achieved</li>\n<li>Not as easy as runtime A/B testing, and probably not feasible if you don't host your application yourself (or if the service where you host the application doesn't have a service like that)</li>\n<li><strong>It can cost money</strong></li>\n<li>JAMstack is about generating static websites</li>\n<li>So let's build whole new static websites for the different variants we have</li>\n<li>Since A/B testing is based on conditions, multiple sites may have to be build</li>\n</ul>\n</li>\n</ul>","excerpt":"The JAMstack has been talked about in recent years like a way to create static websites that scales very well in many different ways.\nSinceâ€¦","frontmatter":{"date":"May 25, 2020","slug":"/a-b-testing-on-the-jamstack","title":"A/B testing on the JAMstack"}}},"pageContext":{"slug":"/a-b-testing-on-the-jamstack"}},"staticQueryHashes":[]}