<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8c4258acfb95297d0e4f.css">code[class*=language-],pre[class*=language-]{text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#90a4ae;background:#fafafa;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#cceae7;color:#263238}:not(pre)>code[class*=language-]{white-space:normal;border-radius:.2em;padding:.1em}pre[class*=language-]{overflow:auto;position:relative;margin:.5em 0;padding:1.25em 1em}.language-css>code,.language-sass>code,.language-scss>code{color:#f76d47}[class*=language-] .namespace{opacity:.7}.token.atrule{color:#7c4dff}.token.attr-name{color:#39adb5}.token.attr-value,.token.attribute{color:#f6a434}.token.boolean{color:#7c4dff}.token.builtin,.token.cdata,.token.char,.token.class{color:#39adb5}.token.class-name{color:#6182b8}.token.comment{color:#aabfc9}.token.constant{color:#7c4dff}.token.deleted{color:#e53935}.token.doctype{color:#aabfc9}.token.entity{color:#e53935}.token.function{color:#7c4dff}.token.hexcode{color:#f76d47}.token.id,.token.important{color:#7c4dff;font-weight:700}.token.inserted{color:#39adb5}.token.keyword{color:#7c4dff}.token.number{color:#f76d47}.token.operator{color:#39adb5}.token.prolog{color:#aabfc9}.token.property{color:#39adb5}.token.pseudo-class,.token.pseudo-element{color:#f6a434}.token.punctuation{color:#39adb5}.token.regex{color:#6182b8}.token.selector{color:#e53935}.token.string{color:#f6a434}.token.symbol{color:#7c4dff}.token.tag{color:#e53935}.token.unit{color:#f76d47}.token.url,.token.variable{color:#e53935}</style><meta name="generator" content="Gatsby 2.2.10"/><style type="text/css">
    .title-anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .title-anchor svg,
    h2 .title-anchor svg,
    h3 .title-anchor svg,
    h4 .title-anchor svg,
    h5 .title-anchor svg,
    h6 .title-anchor svg {
      visibility: hidden;
    }
    h1:hover .title-anchor svg,
    h2:hover .title-anchor svg,
    h3:hover .title-anchor svg,
    h4:hover .title-anchor svg,
    h5:hover .title-anchor svg,
    h6:hover .title-anchor svg,
    h1 .title-anchor:focus svg,
    h2 .title-anchor:focus svg,
    h3 .title-anchor:focus svg,
    h4 .title-anchor:focus svg,
    h5 .title-anchor:focus svg,
    h6 .title-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=8d485ed74983d4ec81528dfc7acbb95a12c9f103"/><title data-react-helmet="true">A tale of bounded components | Blog | Marvin Frachet</title><meta data-react-helmet="true" name="description" content="Building reusable UI components is hard. I always rely on an iterative approach and write my component 2-3 times before getting something that I find useful and…"/><meta data-react-helmet="true" property="og:title" content="A tale of bounded components"/><meta data-react-helmet="true" property="og:description" content="Building reusable UI components is hard. I always rely on an iterative approach and write my component 2-3 times before getting something that I find useful and…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Marvin Frachet"/><meta data-react-helmet="true" name="twitter:title" content="A tale of bounded components"/><meta data-react-helmet="true" name="twitter:description" content="Building reusable UI components is hard. I always rely on an iterative approach and write my component 2-3 times before getting something that I find useful and…"/><link as="script" rel="preload" href="/webpack-runtime-11d36ff36fb5c6e45fb5.js"/><link as="script" rel="preload" href="/styles-9905e2167de1f5db8947.js"/><link as="script" rel="preload" href="/app-b66d6299960035e08442.js"/><link as="script" rel="preload" href="/0-e1610e6154e0a1cad048.js"/><link as="script" rel="preload" href="/1-14606169f663cced6043.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-79b99782120b2491577c.js"/><link as="fetch" rel="preload" href="/static/d/18/path---a-tale-of-bounded-components-a-48-a6f-Bgyo4mDLi1eyewwWFjSO7LsYU.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><style data-emotion-css="3t9ub">*{font-family:-apple-system,blinkmacsystemfont,segoeUI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;margin:0;padding:0;}a:active{opacity:0.7;}.title-anchor{width:20px;height:20px;fill:#3F51B5;}</style><style data-emotion-css="132fjpb">.css-132fjpb{height:60px;background:#fff;}</style><nav class="css-132fjpb edaezx20"><style data-emotion-css="zflk12">.css-zflk12{width:680px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;height:100%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media only screen and (max-width:768px){.css-zflk12{width:auto;margin-left:1rem;margin-right:1rem;}}</style><div class="css-zflk12 e1koyybp0"><style data-emotion-css="1adwf95">.css-1adwf95{height:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;list-style-type:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><ul class="css-1adwf95 edaezx21"><style data-emotion-css="t3tq1o">.css-t3tq1o{padding:0.5rem 1rem;padding-left:0px;}.css-t3tq1o a{-webkit-text-decoration:none;text-decoration:none;color:#3F51B5;}.css-t3tq1o a img{height:24px;vertical-align:middle;border-radius:50%;margin-right:0.5rem;}</style><li class="css-t3tq1o edaezx23"><a href="/">All posts</a></li><style data-emotion-css="1fm72o6">.css-1fm72o6{padding:0.5rem 1rem;}.css-1fm72o6 a{-webkit-text-decoration:none;text-decoration:none;color:#3F51B5;}.css-1fm72o6 a img{height:24px;vertical-align:middle;border-radius:50%;margin-right:0.5rem;}</style><li class="css-1fm72o6 edaezx22"><a href="https://github.com/mfrachet" target="_blank" rel="noreferrer">Github <style data-emotion-css="1ycmoaj">.css-1ycmoaj{color:#373737;}</style><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="css-1ycmoaj edaezx24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li><li class="css-1fm72o6 edaezx22"><a href="https://twitter.com/mfrachet" target="_blank" rel="noreferrer">Twitter <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="css-1ycmoaj edaezx24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></div></nav><style data-emotion-css="rqw1s6">.css-rqw1s6{background:#f4f4f4;margin-bottom:2rem;padding:5rem 0;}@media only screen and (max-width:768px){.css-rqw1s6{height:auto;padding:1rem 0;}}</style><section class="css-rqw1s6 e1m1q1740"><style data-emotion-css="zflk12">.css-zflk12{width:680px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;height:100%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media only screen and (max-width:768px){.css-zflk12{width:auto;margin-left:1rem;margin-right:1rem;}}</style><div class="css-zflk12 e1koyybp0"><style data-emotion-css="quao9l">.css-quao9l{font-size:2.5em;font-weight:normal;-webkit-letter-spacing:0.07em;-moz-letter-spacing:0.07em;-ms-letter-spacing:0.07em;letter-spacing:0.07em;color:#3F51B5;}</style><h1 class="post-title css-quao9l e1m1q1742">A tale of bounded components</h1><style data-emotion-css="1rgvko3">.css-1rgvko3{font-size:0.9em;color:#888888;padding:0;margin:0;margin-top:1rem;}</style><p class="css-1rgvko3 e1m1q1741">Published the<!-- --> <!-- -->5/27/2019</p></div></section><style data-emotion-css="qmonuo">.css-qmonuo hr{margin:2rem 0;}.css-qmonuo p,.css-qmonuo li{-webkit-letter-spacing:0.07em;-moz-letter-spacing:0.07em;-ms-letter-spacing:0.07em;letter-spacing:0.07em;font-size:1em;line-height:2em;color:#373737;}.css-qmonuo p{margin-bottom:1.5rem;}.css-qmonuo h1,.css-qmonuo h2,.css-qmonuo h3,.css-qmonuo h4,.css-qmonuo h5,.css-qmonuo h6,.css-qmonuo ul{margin-bottom:1.5rem;list-style:none;}.css-qmonuo li{margin-left:2rem;}.css-qmonuo li::before{font-size:1.6em;vertical-align:middle;content:'• ';color:#3F51B5;}.css-qmonuo h1{font-size:2.5em;font-weight:normal;-webkit-letter-spacing:0.07em;-moz-letter-spacing:0.07em;-ms-letter-spacing:0.07em;letter-spacing:0.07em;}.css-qmonuo h2{font-size:2em;font-weight:normal;-webkit-letter-spacing:0.07em;-moz-letter-spacing:0.07em;-ms-letter-spacing:0.07em;letter-spacing:0.07em;}.css-qmonuo h3{font-size:1.6em;font-weight:normal;-webkit-letter-spacing:0.07em;-moz-letter-spacing:0.07em;-ms-letter-spacing:0.07em;letter-spacing:0.07em;}.css-qmonuo h4{font-size:1.2em;font-weight:normal;-webkit-letter-spacing:0.07em;-moz-letter-spacing:0.07em;-ms-letter-spacing:0.07em;letter-spacing:0.07em;}.css-qmonuo h4.post-title{font-weight:bold;}.css-qmonuo img,.css-qmonuo iframe{border-radius:10px;margin-bottom:2rem;margin-top:2rem;width:100%;}.css-qmonuo pre{margin:2rem 0 3rem 0;border-radius:10px;padding:1.6rem;font-family:inherit;}.css-qmonuo a{color:#3F51B5;font-weight:bold;padding-bottom:0.05em;-webkit-text-decoration:none;text-decoration:none;border-bottom:1px solid #3F51B5;}.css-qmonuo h1 a,.css-qmonuo h2 a,.css-qmonuo h3 a,.css-qmonuo h4 a,.css-qmonuo h5 a{border-bottom:0px;}</style><div class="css-qmonuo"><style data-emotion-css="zflk12">.css-zflk12{width:680px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;height:100%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media only screen and (max-width:768px){.css-zflk12{width:auto;margin-left:1rem;margin-right:1rem;}}</style><div class="css-zflk12 e1koyybp0"><div><p>Building reusable UI components is hard. I always rely on an iterative approach and write my component 2-3 times before getting something that I find useful and reusable across my applications. It’s kind of a game to find the “good” abstraction and the “good” way to create them.</p>
<p>In <a href="/a-note-on-composing-components-with-react/">A note on composing components with React</a>, I’ve briefly talked about my conception of composition by taking the example of <a href="https://material.io/design/components/cards.html">Google Material Design Cards</a> and how I would have implemented such a thing. This post is an extension of the previous one so I recommend you take a look ☺️.</p>
<p>Today I want to share with you my experience while implementing a UI component library based on a design system and how my team and I have managed to build a <em>bit more complex components</em>.</p>
<p>Let’s talk about components that <em>share something</em>.</p>
<h2 id="radio-buttons"><a href="#radio-buttons" aria-label="radio buttons permalink" class="title-anchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/><script xmlns=""/></svg></a>Radio <em>buttons</em></h2>
<p>I’m going to take the example of radio buttons and this for two reasons.</p>
<p>The first one is that I’m building the UI component library with <a href="https://facebook.github.io/react-native/">React Native</a> and that it doesn’t provide a built-in Radio component and the second one is because radio buttons are kind of <em>special</em>.</p>
<p>By definition, it’s a group of selectable elements where only one element can be selected at a time. <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/radio">Here’s a quick link to the MDN definition of <strong>radio</strong> and <strong>radio groups</strong></a>.</p>
<p>In HTML this link is represented by the <code class="language-text">input</code> <code class="language-text">name</code> attribute:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// this is from MDN</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>contact<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>contact<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>contact<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mail<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre></div>
<p>I think that we can call these <strong>compound semantic elements</strong></p>
<p>If we want to build <a href="https://reactjs.org/">React</a> components that matches the previous definition of radio elements, these components have to share some information with some other ones.</p>
<p>In the React world, we can say that these components <strong>are sharing some state</strong>.</p>
<p>To manage this kind of shared state, we can rely on different approaches.</p>
<h3 id="through-the-parent-state"><a href="#through-the-parent-state" aria-label="through the parent state permalink" class="title-anchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/><script xmlns=""/></svg></a>Through the parent state</h3>
<p>The simplest thing to do in a React world is to rely on the parent component state.</p>
<p>Let’s imagine the following snippet:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedRadio<span class="token punctuation">,</span> selectRadio<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radio</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">selectRadio</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">isSelected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selectedRadio <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radio</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">selectRadio</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">isSelected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selectedRadio <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">The selected value is </span><span class="token punctuation">{</span>selectedRadio<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This is a <em>fine</em> approach and it works as long as we accept to manage the state of the <code class="language-text">&lt;Radio /&gt;</code> components in every of their parents.</p>
<p>However, in this code, there is something that we lost: <strong>the linked nature of radio buttons</strong>. Or at least the <em>family</em> link of the radio elements.</p>
<p>Of course the selected value will be reflected thanks to the parent state. But the radio group is dependent on the parent and not only on itself. On the web platform for example, there are no parent to manage the link between the elements.</p>
<h3 id="using-a-global-state-management-tool-lets-say-redux"><a href="#using-a-global-state-management-tool-lets-say-redux" aria-label="using a global state management tool lets say redux permalink" class="title-anchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/><script xmlns=""/></svg></a>Using a global state management tool (let’s say Redux)</h3>
<p>We can also rely on a global state management tool that will store the actual selected value and provide it across the app:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> ownProps</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  isSelected<span class="token punctuation">:</span> state<span class="token punctuation">.</span>selectedRadio <span class="token operator">===</span> ownProps<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch<span class="token punctuation">,</span> ownProps</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">selectMe</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'SELECT_RADIO'</span><span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> newSelectedRadio<span class="token punctuation">:</span> ownProps<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> RadioEnhanced <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>Radio<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> selectedRadio <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RadioEnhanced</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RadioEnhanced</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">

    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">The selected value is </span><span class="token punctuation">{</span>selectedRadio<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span></code></pre></div>
<p>This is also a <em>fine</em> approach and it has the benefit of keeping the linked nature of the Radio element using the global state.</p>
<p>However, we have to define a new Redux key in the store for every different kind of Radio component. We also have to create a reducer for each kind of Radio groups and so forth. And this will be the same even if you don’t use Redux but an other global state management system.</p>
<h3 id="reacts-context-api"><a href="#reacts-context-api" aria-label="reacts context api permalink" class="title-anchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/><script xmlns=""/></svg></a><a href="https://reactjs.org/docs/context.html">React’s context API</a></h3>
<p><em>I often hear that using the React context is a bad practice. I don’t totally agree with this statement. I think that we have to understand when not to use it and to use it sparsely. The context is a feature that is built in in React, so they may probably be some good use-cases for it.</em></p>
<p>What I suggest before writing any component implementation is to imagine your ideal way to use that component. I often start by writing the shape I want it to have (its API), let’s say:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>selected<span class="token punctuation">,</span> setSelected<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'first'</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">RadioGroup</span></span> <span class="token attr-name">selected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selected<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setSelected<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radio</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>first<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">My first radio</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Radio</span></span><span class="token punctuation">></span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radio</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>second<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">My second radio</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Radio</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">RadioGroup</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>I like this kind of API because it’s straightforward to read.</p>
<p>This code represents a group of radio components that act together. When the <code class="language-text">&lt;Radio name=&quot;first&quot; /&gt;</code> is selected, every other radio components in the <code class="language-text">RadioGroup</code> children tree will be unselected.</p>
<p>The <code class="language-text">selected</code> prop of the <code class="language-text">RadioGroup</code> component corresponds to the <code class="language-text">name</code> of the selected radio component. If I want to select the <code class="language-text">first</code> radio then the code will look like <code class="language-text">&lt;RadioGroup selected=&quot;first&quot;&gt;...&lt;/RadioGroup&gt;</code>.</p>
<p>We can create this behavior and feeling of link using <a href="https://reactjs.org/docs/context.html">React’s context API</a> where the <code class="language-text">RadioGroup</code> component owns the actual selected <code class="language-text">name</code> in its context and share it across its different <code class="language-text">Radio</code> children.</p>
<p><strong>This technique of <em>hiding</em> the state management between components is called <em>implicit state passing</em></strong>. We manage the state in a way the developer doesn’t have to care about and does not have to implement multiple times.</p>
<p><a href="https://codesandbox.io/s/elastic-surf-pxxdt">Here’s a running codesandbox of the <code class="language-text">Radio</code> and <code class="language-text">RadioGroup</code> implementation</a>.</p>
<hr>
<p>We now have a good understanding of the <code class="language-text">React context</code> API. Let’s explore another advanced function of React that also allows to pass some implicit states through another example: the <code class="language-text">Tabs</code> one.</p>
<h2 id="the-tabs-example"><a href="#the-tabs-example" aria-label="the tabs example permalink" class="title-anchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/><script xmlns=""/></svg></a>The <code class="language-text">Tabs</code> example</h2>
<p>In my posts, I’m talking a lot about the Tabs example that <a href="https://twitter.com/ryanflorence">Ryan Florence</a> has provided in <a href="https://www.youtube.com/watch?v=hEGg-3pIHlE">this video</a>. It’s this video that made me realise that I was doing some things wrong and that I had to understand the “composition” concept.</p>
<p><code class="language-text">Tabs</code> are UI elements that define (UI) interfaces sharing a visual link. They have to be close to each other to provide a good user experience. It doesn’t make sense to create a tab at the top left side of the device with another one at the bottom right side.</p>
<p>I like to put <code class="language-text">Tabs</code> in the category of layout components: they are not really business oriented nor atomic UI components. They represent a way to display information and how to navigate between different types of information.</p>
<p>We can imagine this components using multiple approaches and one that often comes and that I used to work with was the data driven approach.</p>
<h3 id="data-driven-approach"><a href="#data-driven-approach" aria-label="data driven approach permalink" class="title-anchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/><script xmlns=""/></svg></a>Data Driven approach</h3>
<p>A data driven approach is a way to build components so that a component requires its props to have a specific shape to be used. For example:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'First'</span><span class="token punctuation">,</span> <span class="token function-variable function">Component</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">First</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Second'</span><span class="token punctuation">,</span> <span class="token function-variable function">Component</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Second</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> <span class="token function-variable function">Tabs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>selected<span class="token punctuation">,</span> setSelected<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> SelectedComponent

  <span class="token keyword">if</span> <span class="token punctuation">(</span>selected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    SelectedComponent <span class="token operator">=</span> items<span class="token punctuation">[</span>selected<span class="token punctuation">]</span><span class="token punctuation">.</span>Component
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setSelected</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> selected <span class="token operator">===</span> index <span class="token operator">?</span> <span class="token string">'green'</span> <span class="token punctuation">:</span> <span class="token string">'black'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">

      </span><span class="token punctuation">{</span>SelectedComponent <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SelectedComponent</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// would be used &lt;Tabs item={items} /></span></code></pre></div>
<p>In this example, the <code class="language-text">Tabs</code> component knows the shape of each of its item to be able to display them correctly. It’s a contract between the object and the component.</p>
<p>While it’s okay to work using this approach, I think that it’s good to think of a way to avoid this kind of tight coupling. Composition can help to achieve this.</p>
<p>As I have mentioned before, let’s image our perfect world API. Something like the following one looks great to me:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tabs</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TabsHeader</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TabHead</span></span><span class="token punctuation">></span></span><span class="token plain-text">First button</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TabHead</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TabHead</span></span><span class="token punctuation">></span></span><span class="token plain-text">Second button</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TabHead</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TabsHeader</span></span><span class="token punctuation">></span></span><span class="token plain-text">

  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TabsBody</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tab</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FirstComponent</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tab</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tab</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SecondComponent</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tab</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TabsBody</span></span><span class="token punctuation">></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tabs</span></span><span class="token punctuation">></span></span></code></pre></div>
<p>Using React, how can we create the different <code class="language-text">TabXXX</code> component so that it works this way?</p>
<p>We could have done this using the context API, but for now, I want to introduce the <code class="language-text">React.cloneElement</code> function.</p>
<h3 id="reactcloneelement"><a href="#reactcloneelement" aria-label="reactcloneelement permalink" class="title-anchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/><script xmlns=""/></svg></a>React.cloneElement</h3>
<p>This function allows to clone a React element with its actual props with the possibility to override them or to add new ones.</p>
<p>It can be used as following:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token keyword">const</span> clone <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  style<span class="token punctuation">:</span> <span class="token punctuation">{</span> backgroundColor<span class="token punctuation">:</span> <span class="token string">'red'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>element<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token punctuation">{</span>clone<span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span></code></pre></div>
<p>We will use this definition of the <code class="language-text">React.cloneElement</code> function to provide some props to the children of a component, implicitly.</p>
<p>For example, we will add a props to the <code class="language-text">TabHead</code> components so that they become clickable.
We will also add a <code class="language-text">selectIndex</code> prop to the <code class="language-text">TabsBody</code> component so that he knows which component has to be displayed or not.</p>
<h4 id="implementing-the-tabs-component"><a href="#implementing-the-tabs-component" aria-label="implementing the tabs component permalink" class="title-anchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/><script xmlns=""/></svg></a>Implementing the <code class="language-text">Tabs</code> component</h4>
<p>The <code class="language-text">Tabs</code> component is the owner, the one that knows everything. It owns the actual selected index and knows how to modify that selected index:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Tabs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedIndex<span class="token punctuation">,</span> setSelectedIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=></span>
    React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token punctuation">{</span> selectedIndex<span class="token punctuation">,</span> selectIndex<span class="token punctuation">:</span> setSelectedIndex <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In this case <code class="language-text">React.cloneElement</code> enhances the child component by adding them two props: the actual selected index and a way to modify that selected index.</p>
<p>In fact, we’ll pass down these two props respectively to the <code class="language-text">TabHead</code>s and the <code class="language-text">Tab</code>s.</p>
<p>The <code class="language-text">TabsHeader</code> component will receive the <code class="language-text">selectIndex</code> function and will pass it down to its <code class="language-text">TabHead</code> children with a subtle variant: we’ll scope the actual index of the <code class="language-text">TabHead</code> component so that they can call the <code class="language-text">selectIndex</code> function without passing their index explicitly:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">TabsHeader</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> selectIndex<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
  React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token function-variable function">selectIndex</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">selectIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">TabHead</code> will simply look like this:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">TabHead</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> selectIndex<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>selectIndex<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
<span class="token punctuation">)</span></code></pre></div>
<p>The <code class="language-text">TabsBody</code> role is to display only the element that matches the selected index. This can be achieved using <code class="language-text">Array.prototype.find</code> on the children:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">TabsBody</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> selectedIndex<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
  React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> selectedIndex <span class="token operator">===</span> index<span class="token punctuation">)</span></code></pre></div>
<p><a href="https://codesandbox.io/s/hardcore-thompson-ibxow">Here’s a link to a codesandbox of the previous snippets.</a></p>
<p><em>I suggest you take some times to analyse and get familiar with this kind of code. It’s something that I wasn’t used to before diving into it.</em></p>
<hr>
<p>So there we are, these are examples with some explanations of more complex and linked components!</p></div></div></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-136744956-2', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"a-tale-of-bounded-components-a48","path":"/a-tale-of-bounded-components/"};window.dataPath="18/path---a-tale-of-bounded-components-a-48-a6f-Bgyo4mDLi1eyewwWFjSO7LsYU";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-b66d6299960035e08442.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-4c010b21325e4fa17523.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-79b99782120b2491577c.js"],"component---src-templates-tags-js":["/component---src-templates-tags-js-533d8b2f1c39a15f4698.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5cc4136e426fec7603ac.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c72cc1efca5d983aef38.js"],"pages-manifest":["/pages-manifest-f055efe8eb0293250f1f.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-79b99782120b2491577c.js" async=""></script><script src="/1-14606169f663cced6043.js" async=""></script><script src="/0-e1610e6154e0a1cad048.js" async=""></script><script src="/app-b66d6299960035e08442.js" async=""></script><script src="/styles-9905e2167de1f5db8947.js" async=""></script><script src="/webpack-runtime-11d36ff36fb5c6e45fb5.js" async=""></script></body></html>